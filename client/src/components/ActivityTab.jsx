import ActivityIcon from "./ActivityIcon";
import ActivityForm from "./ActivityForm";
import { FaTree } from "react-icons/fa6";
import XpBar from "./XpBar";
import { useEffect, useState } from "react";

const ActivityTab = ({ state = {}, dispatch, isStreak }) => {
  const CO2_EMISSIONS = {
    walking: -0.1,
    running: -0.15,
    biking: -0.1,
    transport: -0.3,
  };
  const [selectedActivity, setSelectedActivity] = useState(null);
  const totalCO2 = Number(state?.totalCO2?.toFixed(2)) || 7; // Početna vrijednost je 7
  const [isLoading, setIsLoading] = useState(true); // Stanje za učitavanje

  // Simulacija učitavanja SVG-a
  useEffect(() => {
    const timer = setTimeout(() => {
      setIsLoading(false); // Nakon 2 sekunde, postavite isLoading na false
    }, 2000); // Simuliramo učitavanje od 2 sekunde

    return () => clearTimeout(timer); // Očistite timer kada se komponenta unmounta
  }, []);

  // Funkcija za određivanje boje na temelju vrijednosti CO2
  const getColor = (value) => {
    if (value > 0) return "#E74C3C"; // Crvena
    if (value >= -1) return "#F1C40F"; // Žuta
    return "#2ECC71"; // Zelena
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-4">
        <XpBar />
        <div className="mb-2 flex justify-center relative mt-8">
          {/* Donut grafikon */}
          <div className="w-{32px} h-{32px}">
            {isLoading ? (
              // Prikazujemo loader dok se SVG ne učita
              <div className="flex justify-center items-center">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"></div>
              </div>
            ) : isStreak ? (
              <svg
                id="Layer_1"
                style={{ enableBackground: "new 0 0 30 30" }}
                version="1.1"
                height="160px"
                width="128px"
                viewBox="0 0 30 30"
                xmlns="http://www.w3.org/2000/svg"
              >
                <style type="text/css">
                  {`
                   .st0{fill:#39B54A;}
                   .st1{fill:#5B4531;}
                   .st2{fill:#009245;}
                   .st3{fill:#6B6256;}
                 `}
                </style>
                <g>
                  <path
                    class="st0"
                    d="M8.907,5.489c0,0,0.458-3.277,3.333-2.826c0,0,2.562-3.894,5.458-0.716c0,0,2.572-0.5,3.182,2.375   c0,0,2.61-0.625,3.443,3.042c0,0,2.167,1.875,0,4.125c0,0,0.447,4.625-3.443,2.5c0,0-0.682,4.033-3.64,0.558S12.615,15,12.615,15   s-2.292,2.947-3.708,0.531l0.25-1.333c0,0-4.25,3.328-3.542-2.125c0,0-2.667-3.042,0.125-4.042C5.74,8.031,6.24,3.739,8.907,5.489z   "
                  />
                  <path
                    class="st1"
                    d="M17.219,14.76c0,0-1.469,4.094-1.313,6.906c0.156,2.813,1.313,7.259,1.313,7.259l-4.781,0.4l0.75-2.597   c0,0,0.844-3.344,0.844-3.906s-0.75-5.688-0.75-5.938s-0.548-2.125-0.548-2.125l0.985-1l0.625,0.844l0.344,0.75l0.344,0.188   l0.938-1.188l0.75-0.594L17.219,14.76z"
                  />
                  <path
                    class="st2"
                    d="M16.907,3.197c0,0,2.625-1.042,3.25,3.542c0,0,1.417-0.208,1.542,1.083c0,0,2.375,2-0.167,2.958   c0,0,1.375,2.875-2.25,1.458c0,0,0.5,1.5-0.583,1L17.656,15c0,0,1.418,2.386,3.168,0l0.057-1.011c0,0,2.693,2.333,3.526-1.25   l-0.083-1.25c0,0,2.125-2.583,0-4.125c0,0-0.261-3.292-3.443-3.042c0,0-1.765-3.792-3.182-2.375c0,0-3.458-3-5.458,0.417   C12.24,2.364,11.824,6.281,16.907,3.197z"
                  />
                  <path
                    class="st3"
                    d="M17.196,13.76c0,0-4.049,5.693-0.556,15.565h0.768c0,0-1.115-4.382-1.247-5.884   c-0.101-1.15-0.022-3.479,0.153-4.619c0.161-1.05,0.97-4.126,0.97-4.126L17.196,13.76z"
                  />
                  <g>
                    <path d="M9.032,28.925H7.876c-0.221,0-0.4,0.18-0.4,0.4s0.179,0.4,0.4,0.4h1.156c0.221,0,0.4-0.18,0.4-0.4    S9.253,28.925,9.032,28.925z" />
                    <path d="M20.48,28.925h-0.289c-0.221,0-0.4,0.18-0.4,0.4s0.18,0.4,0.4,0.4h0.289c0.221,0,0.4-0.18,0.4-0.4    S20.701,28.925,20.48,28.925z" />
                    <path d="M25.708,9.251c-0.041-0.862-0.445-1.643-1.094-2.201c-0.078-0.917-0.48-1.773-1.134-2.361    c-0.614-0.552-1.388-0.83-2.184-0.789c-0.173-0.683-0.533-1.302-1.042-1.76c-0.619-0.556-1.402-0.831-2.203-0.791    c-0.122,0.008-0.24,0.038-0.359,0.06c-0.698-0.776-1.703-1.203-2.76-1.143c-1.156,0.061-2.186,0.687-2.779,1.658    c-0.068-0.009-0.133-0.025-0.202-0.029c-0.798-0.052-1.583,0.234-2.202,0.79c-0.509,0.458-0.869,1.076-1.042,1.76    c-0.793-0.045-1.571,0.237-2.185,0.79C5.866,5.824,5.464,6.68,5.387,7.597c-0.649,0.557-1.053,1.338-1.094,2.2    c-0.043,0.914,0.333,1.781,0.989,2.415c-0.088,0.251-0.153,0.511-0.166,0.785c-0.068,1.427,0.947,2.65,2.263,2.727    c0.043,0.002,0.086,0.004,0.13,0.004c0.403,0,0.781-0.126,1.123-0.324c0.2,0.826,0.971,1.475,1.928,1.53    c0.04,0.002,0.079,0.003,0.118,0.003c0.702,0,1.329-0.383,1.834-1.095c0.662,1.884,1.028,4.045,1.028,6.323    c0,2.461-0.415,4.791-1.184,6.773h-1.786c-0.221,0-0.4,0.18-0.4,0.4s0.179,0.4,0.4,0.4h8.379c0.221,0,0.4-0.18,0.4-0.4    s-0.18-0.4-0.4-0.4h-1.302c-0.843-2.024-1.316-4.528-1.316-7.101c0-2.387,0.395-4.649,1.12-6.593    c0.441,0.729,1.111,1.146,1.868,1.146c0.041,0,0.082-0.001,0.124-0.004c0.956-0.055,1.728-0.704,1.928-1.53    c0.341,0.198,0.719,0.324,1.121,0.324c0.044,0,0.088-0.001,0.132-0.004c1.314-0.076,2.33-1.299,2.262-2.727    c-0.013-0.275-0.078-0.534-0.165-0.784C25.375,11.032,25.751,10.165,25.708,9.251z M15.53,21.838c0,2.59,0.448,5.02,1.265,7.101    h-3.596c0.735-2.011,1.139-4.329,1.139-6.773c0-2.58-0.437-5.035-1.255-7.12c0.185-0.237,0.371-0.452,0.558-0.632l1.029,1.822    c0.071,0.126,0.195,0.182,0.348,0.203c0.142,0,0.274-0.075,0.346-0.198l1.211-2.079c0.115,0.099,0.221,0.208,0.322,0.32    c-0.024,0.03-0.048,0.059-0.063,0.096C15.981,16.691,15.53,19.202,15.53,21.838z M14.276,13.912    c0.354-0.218,0.699-0.328,1.019-0.317c0.208,0.005,0.409,0.057,0.603,0.138l-0.875,1.502L14.276,13.912z M24.093,11.165    c-0.009,0.004-0.019,0.003-0.028,0.008c-0.093,0.046-0.157,0.126-0.192,0.216c-0.103,0.139-0.114,0.33-0.005,0.476    c0.03,0.04,0.07,0.065,0.109,0.09c0.057,0.171,0.1,0.347,0.109,0.534c0.047,0.991-0.63,1.839-1.51,1.89    c-0.638,0.041-1.232-0.357-1.513-1.005c-0.001-0.002-0.003-0.003-0.003-0.005c-0.01-0.013-0.014-0.029-0.024-0.042    c-0.004-0.005-0.01-0.007-0.014-0.012c-0.106-0.158-0.308-0.227-0.485-0.149c-0.203,0.088-0.296,0.323-0.208,0.526    c0.024,0.056,0.064,0.098,0.092,0.152c0.124,0.164,0.197,0.353,0.206,0.551c0.029,0.617-0.522,1.153-1.231,1.194    c-0.75,0.038-1.153-0.549-1.298-0.804c-0.533-0.942-1.544-1.96-2.783-1.989c-1.191-0.031-2.326,0.818-3.396,2.512c0,0,0,0,0,0    c-0.382,0.578-0.811,0.852-1.313,0.828c-0.708-0.041-1.261-0.577-1.231-1.194c0.009-0.199,0.083-0.388,0.207-0.552    c0.027-0.053,0.067-0.095,0.091-0.15c0.088-0.203-0.004-0.438-0.207-0.526c-0.181-0.081-0.379-0.01-0.484,0.146    c-0.005,0.006-0.012,0.008-0.016,0.014c-0.016,0.02-0.022,0.045-0.038,0.066c-0.285,0.635-0.868,1.031-1.502,0.986    c-0.88-0.051-1.557-0.899-1.51-1.889c0.009-0.187,0.052-0.364,0.109-0.535c0.039-0.025,0.079-0.05,0.108-0.09    c0.108-0.144,0.099-0.333-0.001-0.471c-0.034-0.093-0.1-0.174-0.196-0.221c-0.01-0.005-0.02-0.004-0.03-0.008    c-0.538-0.479-0.847-1.159-0.813-1.875c0.021-0.431,0.171-0.832,0.407-1.179c0.074,0.1,0.174,0.175,0.303,0.175    c0.02,0,0.041-0.001,0.061-0.004C6.081,8.793,6.23,8.589,6.197,8.371C6.173,8.215,6.171,8.055,6.172,7.896    c0.033-0.084,0.04-0.174,0.013-0.262C6.253,6.93,6.559,6.277,7.056,5.83c0.437-0.393,0.981-0.592,1.539-0.582    c-0.005,0.17-0.003,0.34,0.013,0.505C8.63,5.958,8.803,6.111,9.006,6.111c0.014,0,0.027,0,0.042-0.002    C9.267,6.087,9.427,5.89,9.405,5.67c-0.015-0.146-0.02-0.295-0.012-0.448c0.036-0.758,0.361-1.465,0.891-1.942    c0.458-0.412,1.036-0.621,1.621-0.586c0.033,0.002,0.065,0.01,0.097,0.014c0.038,0.049,0.085,0.093,0.146,0.121    c0.054,0.024,0.11,0.036,0.166,0.036c0.152,0,0.297-0.087,0.364-0.234c0.415-0.913,1.295-1.513,2.295-1.565    c0.916-0.05,1.791,0.373,2.325,1.127c0.033,0.048,0.065,0.097,0.096,0.146c0.076,0.124,0.207,0.191,0.342,0.191    c0.071,0,0.144-0.019,0.208-0.059c0.118-0.072,0.178-0.195,0.184-0.323c0.58-0.026,1.14,0.181,1.59,0.585    c0.529,0.477,0.854,1.185,0.891,1.941c0.007,0.153,0.002,0.303-0.013,0.45c-0.021,0.22,0.139,0.416,0.358,0.438    c0.014,0.001,0.027,0.002,0.041,0.002c0.202,0,0.376-0.154,0.397-0.36c0.016-0.164,0.018-0.333,0.013-0.504    c0.554-0.011,1.102,0.19,1.539,0.582c0.497,0.447,0.804,1.1,0.871,1.804c-0.027,0.087-0.02,0.177,0.013,0.261    c0.001,0.161-0.002,0.322-0.025,0.477c-0.033,0.218,0.117,0.422,0.336,0.455c0.021,0.003,0.04,0.004,0.061,0.004    c0.129,0,0.229-0.075,0.303-0.175c0.235,0.347,0.385,0.748,0.406,1.179C24.943,10.005,24.633,10.686,24.093,11.165z" />
                  </g>
                </g>
              </svg>
            ) : (
              <svg
                enable-background="new 0 0 512 512"
                height="160px"
                id="Layer_1"
                version="1.1"
                viewBox="0 0 512 512"
                width="128px"
              >
                <g>
                  <path
                    clip-rule="evenodd"
                    d="M246.914,472.244c14.414-10.429,18.657-27.272,10.513-44.023   c-3.691-7.595-8.781-14.502-12.625-22.037c-8.865-17.396-10.053-35.153-0.77-52.827c8.309-15.823,6.923-31.354-1.342-46.477   c-1.172-2.144-6.052-4.44-7.938-3.643c-8.583,3.639-16.71,8.354-26.776,13.608c1.926-16.054,19.346-12.686,23.823-22.908   c-13.265-8.244-16.876-7.926-29.553,0.472c-4.928,3.268-10.614,6.358-16.295,7.181c-3.856,0.556-11-2.031-12-4.86   c-3.429-9.703-22.646-17.492-24.331-18.548c0.423-1.092,18.891,1.544,24.818,7.056c11.287,10.501,12.387,11.642,24.677,1.596   c2.41-1.97,4.585-4.23,6.995-6.471c-15.022-19.145-32.454-33.691-55.982-40.558c-5.787-1.688-10.412-7.602-15.36-11.822   c-3.981-3.395-8.333-6.681-11.291-10.882c-4.578-6.498-8.587-13.511-11.915-20.73c-2.519-5.468-4.715-8.762-10.812-4.4   c-1.688,1.207-3.667,2.466-5.645,2.732c-8.563,1.163-9.147,14.891-10.574,14.935c-5.032-9.138,0.258-17.079,3.708-18.906   c5.988-3.171,12.87-4.658,19.97-7.054c-1.096-4.465-1.729-7.855-2.76-11.122c-5.158-16.299-4.949-21.056-16.615-14.712   c-7.94,2.373-14.845,4.109-26.15-6.622c-4.666-0.488-12.419-4.801-12.133-6.522c6.536,2.031,12.987,4.447,19.648,5.923   c3.059,0.677,6.717,0.075,9.76-0.953c4.154-1.404,7.979-3.77,14.095-6.784C83.081,141.025,66.188,139.189,58.5,131   c7.201,1.533,23.308,4.281,30.424,5.798c-8.704-11.412-16.214-21.256-23.722-31.102c0.971-0.802,20.261,16.016,28.932,25.225   c1.145-0.838,2.293-1.674,3.437-2.515c-1.201-3.022-3.258-6.478-3.739-8.756C90,101.5,80.116,88.261,77.166,80.992   c-0.802-1.977-1.181-4.125-1.012-6.431c21.336,25.082,28.449,56.784,41.033,87.698c5.045-8.913,5.891-16.245,2.216-24.205   c-3.409-7.396-3.667-14.642,1.37-20.932c2.542,9.052,5.936,17.633,7.136,26.51c1,7.356,0.693,15.415-1.265,22.547   c-6.367,23.176,2.127,37.164,23.065,48.982c15.719,8.871,33.026,2.243,47.851,10.298c0.681,0.371,1.986-0.177,2.917-0.516   c12.786-4.678,17.396-3.314,25.898,7.259c6.56,8.166,13.342,16.161,20.027,24.229c1.056-0.633,2.115-1.263,3.175-1.898   c-2.47-5.292-4.574-10.801-7.515-15.822c-3.163-5.399-6.806-10.598-10.832-15.387c-2.53-3.02-5.879-5.609-9.333-7.547   c-8.176-4.594-16.343-9.439-25.055-12.777C187.256,199.326,173.5,195.5,160,195.5c5.504-11.484,21-7.5,27.22-1.823   c-1.547-12.278-17.72-37.677-46.863-34.098c7.785-8.037,18.143-9.079,36.527,5.528c-0.75-2.897-0.947-5.113-1.866-6.967   c-3.453-6.949-8.131-13.455-10.517-20.726c-4.191-12.762-10.386-24.149-19.502-27.915c-19-11.5-24.988-16.19-31.318-24.953   c27.497,11.865,58.23,19.356,68.018,57c4.332-14.317,1.072-21.092-7.435-29.597c-16.065-16.063-32.482-33.203-35.173-57.844   c-0.407-3.717,0.761-7.622,1.321-11.421c0.834-5.706,1.781-11.394,2.849-18.173c11.436,4.664,5.037,14.508,5.605,20.68   c6.766-5.132,13.535-10.743,20.796-15.625c6.431-4.326,10.952-1.632,15.92,7.944C171,34.5,161.387,45.572,158.208,49.982   c-9.727,13.511-3.231,27.854,4.199,36.844c6.218,7.529,14.172,13.65,21.506,20.228c6.657,5.968,9.026,13.177,7.43,21.925   c-5.867,32.164,8.401,57.326,38.845,68.25c1.962,0.705,5.541,0.554,6.576-0.691c1.394-1.676,1.966-5.107,1.253-7.237   c-1.442-4.301-4.432-8.079-5.927-12.371c-1.072-3.079-2.305-7.87-0.794-9.784c7.68-9.715,4.855-14.709-9.208-16.457   c11.412-2.563,20.188,3,17.15,9.286c-5.323,11.025,1.886,18.824,3.401,28.009c1.104,6.685,2.49,13.319,3.775,20.117   c12.141-6.373,18.395-28.096,10.964-40.688c-6.351-10.761-14.385-20.526-21.683-30.725c-0.407-0.572-1.225-1.056-1.29-1.644   c-1.692-14.998-15.119-17.635-25.12-23.764c-8.015-4.912-11.738-10.92-7.108-20.228c2.97-5.97,0.238-9.397-4.924-13.02   c-2.695-1.892-4.178-7.082-4.142-10.763c0.028-2.553,3.578-5.073,5.557-7.608c0.794,0.51-0.113,8.252-1.616,12.313   c11.456,3.862,13.817,12.479,14.438,23.117c0.258,4.417,4.964,8.575,7.644,12.85c1.427-0.766,2.849-1.531,4.275-2.297   c-1.576-3.621-3.179-7.229-4.723-10.859c-1.185-2.789-3.36-5.649-3.248-8.404c0.419-10.515,1.35-21.028,2.526-31.493   c1.511-13.434,14.651-27.133,27.683-29.887c5.428-1.146,11.017-2.466,15.901-4.946c3.755-1.91,7.717-5.283,9.207-8.966   c0.705-1.741-4.158-5.738-8.373-11.091c6.701,2.702,15.022,3.639,16.139,6.979c2.877,8.621-3.196,14.307-11.376,17.369   c-5.932,2.218-12.104,4.049-17.617,7.072c-17.734,9.715-24.367,24.661-19.902,44.468c1.607,7.14,4.142,14.073,5.952,20.103   c18.632-8.122,19.627-28.426,32.211-40.458c7.193,5.557,7.193,5.557-9.836,17.901c5.517,6.852,3.111,12.685-2.961,17.829   c-9.26,7.837-10.843,21.014-3.57,31.539c5.581,8.073,11.436,15.951,17.303,24.103c8.019-4.455,12.112-11.226,9.815-19.99   c-1.088-4.155-5.339-7.479-9.381-12.79c8.092,1.37,16.565,2.807,26.748,4.531c-2.337-6.518-4.355-12.141-6.407-17.857   c-2.961,0.8-5.153,1.393-8.353,2.255c4.694-4.388,8.502-7.953,12.77-11.944c1.499,2.096,3.675,5.14,5.854,8.182   c0.451-0.244,0.902-0.49,1.354-0.733c-1.713-11.279-2.543-22.779-5.319-33.79c-6.625-26.301,5.875-43.823,27.139-60.596   c-1.232,4.176-1.438,6.316-2.426,7.992c-4.852,8.202-9.977,16.243-14.885,24.415c-5.988,9.965-3.603,19.172,4.021,31.312   c1.096-14.982,4.275-26.051,17.013-32.172c-0.782,10.771-12.363,16.995-8.382,28.015c0.161,0.447-0.423,1.451-0.935,1.817   c-17.477,12.617-2.579,23.73,2.043,36.151c-3.377-20.305,16.609-21.356,25.148-31.579c0.931-1.116,12.29,8.917,11.697,10.589   c-3.396-1.011-6.794-2.025-10.823-3.222c-0.387,10.205-20.426,12.111-12.411,28.165c9.595-1.437,17.791-5.144,23.363-15.218   c3.236-5.849,9.796-9.818,14.647-14.834c3.61-3.725,7.685-7.342,10.069-11.8c2.342-4.374,2.168-8.662-5.29-9.191   c-4.118-0.294-8.35-3.064-11.814-5.667c-0.972-0.729,3.946-17.92,4.517-15.445c1.494,6.487,1.31,11.905,1.31,14.341   c1.406,0.185,3.784,0.507,6.157,0.795c12.697,1.545,18.097,12.163,11.062,22.781c-3.063,4.618-7.789,8.093-11.428,12.373   c-3.688,4.333-6.964,9.016-10.421,13.543c1.02,0.792,2.039,1.584,3.059,2.374c9.502-11.065,19.003-22.13,29.613-34.487   c1.249,13.783-5.501,22.132-13.068,29.232c-7.14,6.699-15.626,12.038-23.826,17.521c-5.158,3.449-7.531,6.554-6.262,13.704   c2.651,14.932,0.104,30.135,2.22,45.546c2.732,19.952-7.507,37.375-22.34,51.626c-6.544,6.288-12.81,13.424-17.057,21.328   c-2.337,4.352-0.226,11.095-0.121,16.759c4.662-0.431,9.614,0,13.942-1.442c24.016-8.017,28.674-28.553,32.261-50.081   c1.229-7.388,4.73-14.405,7.281-21.558c0.588-1.648,1.901-3.079,2.293-4.747c3.203-13.757,6.266-27.546,9.55-42.103   c14.659,8.065,0.419,18,4.255,25.979c19.192-10.396,23.854-30.58,12.08-48.993c-2.28-3.57-3.759-10.868-1.761-13.39   c7.906-9.951,5.063-34.769,4.701-45.101c8.5,6,6.63,12.665,7.432,28.62c3.53-13.573,7.402-24.705,21.019-28.696   c1.89-0.554,3.723-5.863,3.349-8.671c-0.947-7.138,0.729-12.471,8.159-13.362c7.567-0.909,11.073,4.247,13.148,11.101   c1.544,5.085,4.763,9.651,6.432,14.712c1.035,3.135,0.567,6.766,0.773,10.177c-2.809-1.05-5.992-1.578-8.337-3.266   c-3.615-2.597-6.649-5.996-8.769-7.968c-27.445,9.494-36.306,28.66-31.08,58.001c14.873-8.926,29.44-9.393,44.534-6.133   c-10.408,2.688-20.965,4.94-31.147,8.315c-3.417,1.134-8.185,4.944-8.41,7.842c-1.486,18.767-12.222,31.847-25.668,43.797   c11.363,3.004,12.379,2.125,18.52-6.075c4.445-5.938,8.315-16.048,19.431-17.47s15.731,7.398,22.433,13.37   c-6.858-0.771-14.337-3.59-20.41-1.755c-6.616,1.999-11.79,8.517-17.858,12.681c-4.046,2.778-8.47,6.773-12.866,6.965   c-18.157,0.79-30.777,15.463-28.537,35.762c18.705-15.202,33.094-22.825,54.123-8.887C435.5,216,436,225,430.539,235.433   c-4.719-5.137-4.218-11.296-6.039-15.433c-3.111-7.076-13.553-5.118-18.562-2.178c-10.819,6.347-22.598,12.568-30.592,21.784   c-7.858,9.064-13.451,19.378-26.047,23.144c-4.469,1.334-8.172,5.21-13.512,8.788c5.907,2.317,10.22,4.279,14.708,5.71   c13.612,4.348,13.681,4.243,17.638-9.521c2.522-8.756,12.817-11.406,23.806-4.687c-3.521,0.447-11.77,1.181-15.977,1.391   c1.386,8.228,1.537,14.07-4.765,20.136c-10.698,3.435-12.329,5.028-22.918,4.964c-1.378-0.008-2.861-0.233-4.118-0.77   c-13.681-5.863-15.389-5.46-26.801,6.789c10.509,1.652,31.08,7.91,30.963,9.401c-10.126,0-20.305-0.641-30.37,0.153   c-14.905,1.172-23.013,10.033-24.455,25.333c-0.331,3.506-0.646,7.097-0.267,10.565c2.797,25.612,4.747,51.377,9.063,76.738   c2.68,15.724,8.325,31.08,13.942,46.114c4.98,13.329,16.988,20.305,28.892,26.82c4.194,2.297,8.377,4.626,12.053,6.656   c-13.189,4.501-25.846,8.994-38.615,13.12c-13.02,4.215-24.878-1.152-37.141-4.48c-6.285-1.709-13.297-0.79-19.981-0.919   c-1.713-0.032-3.796,1.213-5.094,0.589c-14.45-6.931-29.122-2.829-43.809-1.443c-4.997,0.472-10.13-0.487-15.574-2.32   c18.935-6.83,40.23-8.873,50.127-29.875L246.914,472.244z M346.688,113.558c-10.997,1.801-12.121,8.738-12.383,17.274   c-0.266,8.587,0.834,19.583-3.844,25.243c-17.323,20.965-29.682,44.073-37.737,69.789c-0.306,0.969-1.494,1.714-1.66,2.669   c-1.079,6.208-1.986,12.447-2.643,16.678c10.134-10.507,20.578-21.048,30.688-31.897c9.421-10.106,20.043-20.897,15.264-35.879   c-3.059-9.582-0.987-16.094,5.13-21.768C352.958,143.171,350.057,128.773,346.688,113.558z M304.157,168.791   c17.504-14.889,19.981-28.652,9.485-50.099c-6.911-14.119-6.911-14.119-16.372-12.215c7.749,10.247,5.17,19.789-1.785,29.015   c-6.834,9.063-6.017,17.458,2.184,25.333C299.93,162.994,301.671,165.704,304.157,168.791z M228.128,256.4   c-3.518-5.057-7.805-11.708-12.657-17.917c-1.527-1.953-4.517-3.722-6.931-3.853c-8.511-0.465-17.057-0.181-25.91-0.181   c3.768,2.575,7.644,6.101,12.186,8.164C205.695,247.55,216.885,251.801,228.128,256.4z M280.068,190.117   c11.593-14.856,11.287-17.162-4.743-34.345C272.444,168.35,273.085,179.11,280.068,190.117z M271.876,201.17   c-0.87-0.228-1.736-0.456-2.606-0.685c-9.756,19.203-9.756,19.203-4.872,23.978C266.988,216.396,269.431,208.784,271.876,201.17z"
                    fill-rule="evenodd"
                  />
                </g>
              </svg>
            )}
          </div>
        </div>

        {/* Prikaz trenutne vrijednosti CO2 */}
        <div className="text-center mb-8">
          <div className="text-lg font-semibold">Trenutni CO2 utjecaj:</div>
          <div className="text-2xl font-bold text-gray-800">
            {totalCO2} kg CO2
          </div>
        </div>

        <div className="grid grid-cols-2 md:grid-cols-2 gap-4 mb-8">
          {Object.entries(CO2_EMISSIONS).map(([activity]) => (
            <ActivityIcon
              key={activity}
              activity={activity}
              count={state?.[activity] ?? 0}
              onClick={() => setSelectedActivity(activity)}
            />
          ))}
        </div>

        {/* <button
          onClick={() => dispatch({ type: "RESET" })}
          className="mt-6 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
        >
          Reset
        </button> */}

        <ActivityForm
          activity={selectedActivity}
          isOpen={!!selectedActivity}
          onSubmit={(activity, minutes) => {
            dispatch({ type: "INCREMENT", activity, minutes });
          }}
          onClose={() => setSelectedActivity(null)}
        />
      </div>
    </div>
  );
};

export default ActivityTab;
